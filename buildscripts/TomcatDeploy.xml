
<project name="TomcatDeploy" default="deployApp" basedir=".">
  <description>
        Deployment to Tomcat Tasks
  </description>

   <!-- Define tasks from the ant/tomcat jar -->
   <taskdef name="remove"   classname="org.apache.catalina.ant.RemoveTask"/>
   <taskdef name="deploy"   classname="org.apache.catalina.ant.DeployTask"/>
   <taskdef name="reload" classname="org.apache.catalina.ant.ReloadTask"/>
   <taskdef name="install"   classname="org.apache.catalina.ant.InstallTask"/>
   <taskdef name="start"   classname="org.apache.catalina.ant.StartTask"/>
   <taskdef name="undeploy"   classname="org.apache.catalina.ant.UndeployTask"/>


   <target name="undeployApp" description="Undeploys the Web Application">
        <echo message="Undeploying ${tomcat.app.name}."/>
        <remove url="${tomcat.mgr.url}" username="${tomcat.mgr.username}" password="${tomcat.mgr.password}" path="${tomcat.path}"/>
    </target>

    <target name="deployApp" description="Deploys the Web Application" depends="undeployApp">
        <echo message="Deploying ${tomcat.app.name}."/>
        <deploy url="${tomcat.mgr.url}" username="${tomcat.mgr.username}" password="${tomcat.mgr.password}" path="${tomcat.path}"  war="file:${tomcat.app.name}-(bld${build.number})-${build.time}.war"/>
	  <delete file="${tomcat.app.name}-(bld${build.number})-${build.time}.war"/>
    </target>

    <target name="deployNewApp" description="Deploys the Web Application">
        <echo message="Deploying ${tomcat.app.name}."/>
        <deploy url="${tomcat.mgr.url}" username="${tomcat.mgr.username}" password="${tomcat.mgr.password}" path="${tomcat.path}"  war="file:${tomcat.app.name}-(bld${build.number})-${build.time}.war"/>
        <delete file="${tomcat.app.name}-(bld${build.number})-${build.time}.war"/>
    </target>

    <target name="reloadApp" description="Reloads the Web Application">
        <echo message="Reloading ${tomcat.app.name}."/>
	  <reload url="${tomcat.mgr.url}" username="${tomcat.mgr.username}" password="${tomcat.mgr.password}" path="${tomcat.path}"/>
    </target>
	
	
</project>