<%@ page import="reger.core.Debug" %>
<%@ page import="reger.mega.MegaChartFactory" %>
<%@ page import="reger.mega.MegaChart" %>
<%@ page import="reger.util.Num" %>
<%
/*----------------------------------------------------*/
/*                  Page Config                       */
reger.pageFramework.PageProps pageProps = new reger.pageFramework.PageProps();
pageProps.siteSection=pageProps.PUBLICSITE;
pageProps.isPasswordProtected = false;
pageProps.isLogidRequired = false;
pageProps.trafficType=reger.Vars.TRAFFICTYPEPUBLICMISC;
pageProps.pathToAppRoot="";
/*----------------------------------------------------*/
%>
<%@ include file="globalheader.jsp" %>


<%
/*----------------------------------------------------*/
/*                  Main Body                         */
        StringBuffer mb = new StringBuffer();
/*----------------------------------------------------*/
%>



<%
try {

//  Testing
//    MegaChart megaChart = new MegaChart(96);
//    if (Num.isinteger(request.getParameter("megachartid"))){
//        megaChart = new MegaChart(Integer.parseInt(request.getParameter("megachartid")));
//    }
//    megaChart.loadMegaChartSeriesData(userSession);

    //Determine whether or not this is a preview of a chart.
    boolean ispreview = false;
    if (request.getParameter("ispreview")!=null && request.getParameter("ispreview").equals("1")){
        ispreview=true;
    }

    //Get the chart and load its data
    reger.mega.MegaChart megaChart = new reger.mega.MegaChart(request);
    if (ispreview){
        megaChart.setMegaChartSeriesAsPreview();
    } else {
        megaChart.loadMegaChartSeriesData(userSession);
    }



    //Get the chart
    mb.append(MegaChartFactory.getHighChart(megaChart));
    mb.append("<br/><br/>");
    //mb.append("<pre>"+cStr+"</pre>");



    //Chart End
} catch (Exception e) {
    Debug.errorsave(e, "");
}
%>










<%--<%--%>
    <%--mb.append("<script src=\"js/Highcharts-2.2.0/js/highcharts.js\" type=\"text/javascript\"></script>\n" +--%>
            <%--"\n" +--%>
            <%--"<script type=\"text/javascript\">\n" +--%>
            <%--"\n" +--%>
            <%--"(function($){ // encapsulate jQuery\n" +--%>
            <%--"\n" +--%>
            <%--"var chart;\n" +--%>
            <%--"$(document).ready(function() {\n" +--%>
            <%--"    chart = new Highcharts.Chart({\n" +--%>
            <%--"        \"title\": {\n" +--%>
            <%--"            text: 'Monthly Average Temperature',\n" +--%>
            <%--"            x: -20 //center\n" +--%>
            <%--"        },\n" +--%>
            <%--"        subtitle: {\n" +--%>
            <%--"            text: 'Source: WorldClimate.com',\n" +--%>
            <%--"            x: -20\n" +--%>
            <%--"        },\n" +--%>
            <%--"        xAxis: {\n" +--%>
            <%--"            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\n" +--%>
            <%--"                'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\n" +--%>
            <%--"        },\n" +--%>
            <%--"        yAxis: {\n" +--%>
            <%--"            title: {\n" +--%>
            <%--"                text: 'Temperature (°C)'\n" +--%>
            <%--"            },\n" +--%>
            <%--"            plotLines: [{\n" +--%>
            <%--"                value: 0,\n" +--%>
            <%--"                width: 1,\n" +--%>
            <%--"                color: '#808080'\n" +--%>
            <%--"            }]\n" +--%>
            <%--"        },\n" +--%>
            <%--"        tooltip: {\n" +--%>
            <%--"            formatter: function() {\n" +--%>
            <%--"                    return '<b>'+ this.series.name +'</b><br/>'+\n" +--%>
            <%--"                    this.x +': '+ this.y;\n" +--%>
            <%--"            }\n" +--%>
            <%--"        },\n" +--%>
            <%--"        legend: {\n" +--%>
            <%--"            layout: 'vertical',\n" +--%>
            <%--"            align: 'right',\n" +--%>
            <%--"            verticalAlign: 'top',\n" +--%>
            <%--"            x: -10,\n" +--%>
            <%--"            y: 100,\n" +--%>
            <%--"            borderWidth: 0\n" +--%>
            <%--"        },\n" +--%>
            <%--"        series: [{\n" +--%>
            <%--"            name: 'Tokyo',\n" +--%>
            <%--"            data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 18.3, 13.9, 9.6]\n" +--%>
            <%--"        }, {\n" +--%>
            <%--"            name: 'New York',\n" +--%>
            <%--"            data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]\n" +--%>
            <%--"        }, {\n" +--%>
            <%--"            name: 'Berlin',\n" +--%>
            <%--"            data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]\n" +--%>
            <%--"        }, {\n" +--%>
            <%--"            name: 'London',\n" +--%>
            <%--"            data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]\n" +--%>
            <%--"        }],\n" +--%>
            <%--"        \"chart\" : {\n" +--%>
            <%--"            renderTo: 'container',\n" +--%>
            <%--"            type: 'line',\n" +--%>
            <%--"            marginRight: 130,\n" +--%>
            <%--"            marginBottom: 25\n" +--%>
            <%--"        },\n" +--%>
            <%--"    });\n" +--%>
            <%--"});\n" +--%>
            <%--"\n" +--%>
            <%--"})(jQuery);\n" +--%>
            <%--"</script>");--%>



    <%--mb.append("<div id=\"container\" style=\"width: 100%; height: 400px\"></div>");--%>
<%--%>--%>









<%
/*----------------------------------------------------*/
/*                  Side Column                       */
        StringBuffer sc = new StringBuffer();
/*----------------------------------------------------*/


%>

<%@ include file="globalfooter.jsp" %>