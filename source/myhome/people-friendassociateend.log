<%@ page import="reger.core.db.Db"%>
<%
/*----------------------------------------------------*/
/*                  Page Config                       */
reger.pageFramework.PageProps pageProps = new reger.pageFramework.PageProps();
pageProps.siteSection=pageProps.ADMINSITE;
pageProps.title = "Create Friendship";
pageProps.isPasswordProtected = true;
pageProps.navButtonName = "peoplefriends";
pageProps.aclObjectName = "PEOPLE";
pageProps.trafficType=reger.Vars.TRAFFICTYPEADMINMISC;
pageProps.pathToAppRoot="../";
/*----------------------------------------------------*/
%>

<%@ include file="../globalheader.jsp" %>

<%

/*----------------------------------------------------*/
/*                  Main Body                         */
        StringBuffer mb = new StringBuffer();
/*----------------------------------------------------*/

//Add the friend
int accountuseridOfFriendToAdd = -1;
if (request.getParameter("accountuseridOfFriendToAdd")!=null && reger.core.Util.isinteger(request.getParameter("accountuseridOfFriendToAdd"))){
    accountuseridOfFriendToAdd = Integer.parseInt(request.getParameter("accountuseridOfFriendToAdd"));
}
boolean success = false;
if (pageProps.action.equals("addfriend")){
    //Add the friend
    userSession.getAccountuser().addFriend(accountuseridOfFriendToAdd);
    success=true;
}


if (success){

    reger.Accountuser autarget = new reger.Accountuser(accountuseridOfFriendToAdd, true);

    //Show the link between the two friends
    mb.append("<table cellpadding=5 cellspacing=8 border=0 width=80% align=center bgcolor=#e6e6e6>");
    mb.append("<tr>");
    mb.append("<td valign=top align=center bgcolor=#ffffff>");
    mb.append("<font face=arial size=+1>");
    mb.append(autarget.getFriendlyname());
    mb.append("</font>");
    mb.append("<br>");
    mb.append("<img src='"+autarget.primaryImage(pageProps.pathToAppRoot, true)+"' border=0 width=100>");
    mb.append("</td>");
    mb.append("<td valign=middle bgcolor=#ffffff nowrap>");
    mb.append("<font face=arial size=+3>");
    mb.append("&lt; -- Friends -- &gt;");
    mb.append("</font>");
    mb.append("</td>");
    mb.append("<td valign=top align=center bgcolor=#ffffff>");
    mb.append("<font face=arial size=+1>");
    mb.append(userSession.getAccountuser().getFriendlyname());
    mb.append("</font>");
    mb.append("<br>");
    mb.append("<img src='"+userSession.getAccountuser().primaryImage(pageProps.pathToAppRoot, true)+"' border=0 width=100>");
    mb.append("</td>");
    mb.append("</tr>");
    mb.append("</table>");

} else {

    mb.append("Sorry, friendship not created.  Please try again.");

}




mb.append("<br><br><br><br>");


%>

<%
/*----------------------------------------------------*/
/*                  Side Column                       */
    StringBuffer sc = new StringBuffer();
/*----------------------------------------------------*/

//sc.append("This is a ");
//sc.append("side column section.");
%>


<%@ include file="../globalfooter.jsp" %>
