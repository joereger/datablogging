<%@ page import="reger.core.db.Db"%>
<%
/*----------------------------------------------------*/
/*                  Page Config                       */
reger.pageFramework.PageProps pageProps = new reger.pageFramework.PageProps();
pageProps.siteSection=pageProps.ADMINSITE;
pageProps.title = "Cell Phone / Mobile Web Logging";
pageProps.isPasswordProtected = true;
pageProps.navButtonName = "toolsmobile";
pageProps.aclObjectName = "CUSTOMIZE";
pageProps.trafficType=reger.Vars.TRAFFICTYPEADMINMISC;
pageProps.pathToAppRoot="../";
/*----------------------------------------------------*/
%>

<%@ include file="../globalheader.jsp" %>

<%
/*----------------------------------------------------*/
/*                  Main Body                         */
        StringBuffer mb = new StringBuffer();
/*----------------------------------------------------*/



mb.append("<table cellpadding=3 cellspacing=0 width=100% border=0>");

mb.append("<tr>");
mb.append("<td valign=top bgcolor=#666666 align=left colspan=3>");
mb.append("<font face=arial size=-1 color=#ffffff><strong>&nbsp;</strong></font>");
mb.append("</td>");
mb.append("</tr>");

mb.append("<tr>");
mb.append("<td valign=top align=left>");
mb.append("<img src=images/cell-wap-sm.jpg border=0>");
mb.append("</td>");

mb.append("<td valign=top align=left>");
mb.append("<font face=arial size=-1>");
mb.append("If you've got a WAP-capable cell phone or other device you can check on your site 24/7 from anywhere!");
mb.append("<br><br>");
mb.append("<ol>");
mb.append("<li>");
mb.append("Use your device to connect to "+reger.Vars.getHttpUrlPrefix()+userSession.getSiteRootUrl()+"/mobile/home.log");
mb.append("</li>");
mb.append("<li>");
mb.append("Enter your password.");
mb.append("</li>");
mb.append("<li>");
mb.append("Choose 'Go'.");
mb.append("</li>");
mb.append("</ol>");

mb.append("It's that easy!  Create a bookmark on your device so that you don't have to manually enter the URL each time you want to check your traffic stats. ");
mb.append("<br><br>");
mb.append("You only need to login once.  After that your phone is associated with the account whether you use it every day or once a week.  Simple, eh?");
mb.append("<br><br>");
mb.append("Below you'll find a list of phones that have logged in to your site with a valid password and are now associated to your account.  Click Disable to force the phone to login again the next time it attempts to access the site.  You're in control.");
mb.append("<br><br>");
mb.append("Here's what you can access from your device:");



mb.append("<ol>");
mb.append("<li>");
mb.append("Traffic Summary for Standard Accounts");
	mb.append("<ul>");
	mb.append("<li>Hits Yesterday - The total number of hits that your site has recieved yesterday.</li>");
	mb.append("<li>Hits Week - Total number of hits in the last 7 days.</li>");
	mb.append("<li>Home Yesterday - Total Homepage hits yesterday.</li>");
	mb.append("<li>Home Week - Total Homepage hits in the last 7 days.</li>");
	mb.append("<li>Entry Yesterday - Total number of log entry detail pages read yesterday.</li>");
	mb.append("<li>Entry Week - Total number of log entry detail pages read in the last 7 days.</li>");
	mb.append("<li>Unapproved Messages - Messages that your readers have submitted and are waiting for approval from you.</li>");
	mb.append("</ul>");
mb.append("</li>");
mb.append("<li>");
mb.append("Top 10 Today - See the most-read entries today.");
mb.append("</li>");
mb.append("<li>");
mb.append("Traffic By Log - See which log is getting the most traffic today.");
mb.append("</li>");
mb.append("<li>");
mb.append("Mobile Logging - You can make log entries with your cell phone!	Keep your web log up-to-date from anywhere.");
mb.append("</li>");
mb.append("</ol>");




mb.append("<ol>");
mb.append("<li>");
mb.append("Traffic Summary for <a href='accountstatus.log'>Pro Accounts</a>");
	mb.append("<ul>");
	mb.append("<li>Hits Today - The total number of hits that your site has recieved today.</li>");
	mb.append("<li>Hits Week - Total number of hits in the last 7 days.</li>");
	mb.append("<li>Home Today - Total Homepage hits today.</li>");
	mb.append("<li>Home Week - Total Homepage hits in the last 7 days.</li>");
	mb.append("<li>Entry Today - Total number of log entry detail pages read today.</li>");
	mb.append("<li>Entry Week - Total number of log entry detail pages read in the last 7 days.</li>");
	mb.append("<li>Unapproved Messages - Messages that your readers have submitted and are waiting for approval from you.</li>");
	mb.append("</ul>");
mb.append("</li>");
mb.append("<li>");
mb.append("Top 10 Today - See the most-read entries today.");
mb.append("</li>");
mb.append("<li>");
mb.append("Traffic By Log - See which log is getting the most traffic today.");
mb.append("</li>");
mb.append("<li>");
mb.append("Mobile Logging - You can make log entries with your cell phone!	Keep your web log up-to-date from anywhere.");
mb.append("</li>");
mb.append("</ol>");
mb.append("</font>");


mb.append("<table cellpadding=0 cellspacing=0 width=100% border=0>");
mb.append("<tr><td bgcolor=#cccccc><font face=arial size=-1><strong>Activated Devices</strong></font> <font face=arial size=-2><strong>(To activate a device follow the steps above.)</strong></font></td></tr>");


if (pageProps.action.equals("deactivate") && request.getParameter("mobileid")!=null && !request.getParameter("mobileid").equals("")){

	//-----------------------------------
	//-----------------------------------
	int count = Db.RunSQLUpdate("DELETE FROM mobile WHERE mobileid='"+ request.getParameter("mobileid") +"' AND accountid='"+ userSession.getAccount().getAccountid() +"'");
	//-----------------------------------
	//-----------------------------------


}
//-----------------------------------
//-----------------------------------
String[][] rstActiveDev= Db.RunSQL("SELECT mobileid, xupsubno FROM mobile WHERE accountuserid='"+ userSession.getAccountuser().getAccountuserid() +"'");
//-----------------------------------
//-----------------------------------
int activephones=0;

if (rstActiveDev!=null && rstActiveDev.length>0){
	for(int i=0; i<rstActiveDev.length; i++){
		activephones=activephones+1;
		mb.append("<tr>");
        mb.append("<td bgcolor=#ffffff>");
        mb.append("<font face=arial size=-1>");
        mb.append("(<strong>");
        mb.append("<a href='tools-mobile.log?action=deactivate&mobileid="+rstActiveDev[i][0]+"'>Deactivate</a>");
        mb.append("</strong>)");
        mb.append(rstActiveDev[i][1]);
        mb.append("</font>");
        mb.append("</td></tr>");
	}
}

if (activephones==0){
    mb.append("<tr>");
    mb.append("<td bgcolor=#ffffff>");
    mb.append("<font face=arial size=-1>");
    mb.append("No Devices Active.");
    mb.append("</font>");
    mb.append("</td></tr>");

}

mb.append("</table>");


mb.append("</td>");
mb.append("</tr>");

mb.append("</table>");

%>

<%
/*----------------------------------------------------*/
/*                  Side Column                       */
        StringBuffer sc = new StringBuffer();
/*----------------------------------------------------*/

//sc.append("This is a ");
//sc.append("side column section.");
%>


<%@ include file="../globalfooter.jsp" %>
