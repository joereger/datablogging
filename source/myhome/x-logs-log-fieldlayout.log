<%@ page import="reger.core.db.Db,
                 reger.core.Util,
                 java.util.TreeMap,
                 reger.mega.FieldType,
                 reger.mega.FieldLayout"%>
<%@ page import="reger.cache.LogCache"%>
<%
/*----------------------------------------------------*/
/*                  Page Config                       */
reger.pageFramework.PageProps pageProps = new reger.pageFramework.PageProps();
pageProps.siteSection=pageProps.ADMINSITE;
pageProps.title = "<img src='../images/icon-log-med-notext.gif' align=top> Customize Log Properties";
pageProps.isPasswordProtected = true;
pageProps.navButtonName = "logsyourlogs";
pageProps.aclObjectName = "CUSTOMIZELOG";
pageProps.trafficType=reger.Vars.TRAFFICTYPEADMINMISC;
pageProps.pathToAppRoot="../";
//pageProps.isLogidRequired=true;
/*----------------------------------------------------*/
%>

<%@ include file="../globalheader.jsp" %>

<%
/*----------------------------------------------------*/
/*                  Main Body                         */
        StringBuffer mb = new StringBuffer();
/*----------------------------------------------------*/



//Log Header start
String currentNavButtonName = "logs-fieldlayout";
%>
<%@ include file="logs-header.jsp" %>
<%
//Log Header end


//See if it's your own type
reger.Log log = LogCache.get(pageProps.logProps.logid);
reger.MegaLogType mlt = reger.AllMegaLogTypesInSystem.getMegaLogTypeByEventtypeid(log.getEventtypeid());
if (mlt.getAccountuserid()==userSession.getAccountuser().getAccountuserid()){
    mb.append(reger.InfoBox.get(reger.InfoBox.BOXTYPEINFO, pageProps.pathToAppRoot, "Note: This log is of a custom log type that you own.  Any changes to the layout here will NOT be reflected in the layout of the custom log type."));
}



mb.append("<table cellpadding=5 cellspacing=1 border=0 width=100% align=center>");


mb.append("<tr>");
mb.append("<td bgcolor=#ffffff align=left colspan=2>");
mb.append("<a href='x-logs-newfield.log?logid="+pageProps.logProps.logid+"&eventtypeid="+1+"&action=addfield&returntopage=x-logs-log-fieldlayout.log'>");
mb.append("<font face=arial size=-2>");
mb.append("<img src='images/add_16.gif' width=16 height=16 border=0 align=middle>");
mb.append("Add Field");
mb.append("</font>");
mb.append("</a>");
mb.append("</td>");
mb.append("</tr>");


//Main fields display
mb.append("<tr>");
mb.append("<td bgcolor=#ffffff align=left colspan=2>");
mb.append("<!-- START XFORM -->");
//mb.append(reger.xforms.MegaHtmlFormCenterChiba.getHtml(userSession, pageProps, true, request, response));
mb.append("<!-- END XFORM -->");
mb.append("</td>");
mb.append("</tr>");


mb.append("<!-- End column table -->");
mb.append("</table>");
mb.append("<br><br>");



//Log Footer start
%>
<%@ include file="logs-footer.jsp" %>
<%
//Log Footer end

%>

<%
/*----------------------------------------------------*/
/*                  Side Column                       */
        StringBuffer sc = new StringBuffer();
/*----------------------------------------------------*/
//sc.append("This is a ");
//sc.append("side column section.");

%>


<%@ include file="../globalfooter.jsp" %>
