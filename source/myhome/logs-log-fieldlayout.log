<%@ page import="reger.core.db.Db,
                 reger.core.Util,
                 java.util.TreeMap,
                 reger.mega.FieldType,
                 reger.mega.FieldLayout"%>
<%@ page import="reger.cache.LogCache"%>
<%
/*----------------------------------------------------*/
/*                  Page Config                       */
reger.pageFramework.PageProps pageProps = new reger.pageFramework.PageProps();
pageProps.siteSection=pageProps.ADMINSITE;
pageProps.title = "<img src='../images/icon-log-med-notext.gif' align=top> Customize Log Properties";
pageProps.isPasswordProtected = true;
pageProps.navButtonName = "logsyourlogs";
pageProps.aclObjectName = "CUSTOMIZELOG";
pageProps.trafficType=reger.Vars.TRAFFICTYPEADMINMISC;
pageProps.pathToAppRoot="../";
//pageProps.isLogidRequired=true;
/*----------------------------------------------------*/
%>

<%@ include file="../globalheader.jsp" %>

<%
/*----------------------------------------------------*/
/*                  Main Body                         */
        StringBuffer mb = new StringBuffer();
/*----------------------------------------------------*/



//Process any layout changes
FieldLayout.processLayoutChange(request);


//Log Header start
String currentNavButtonName = "logs-fieldlayout";
%>
<%@ include file="logs-header.jsp" %>
<%
//Log Header end


//See if it's your own type
reger.Log log = LogCache.get(pageProps.logProps.logid);
reger.MegaLogType mlt = reger.AllMegaLogTypesInSystem.getMegaLogTypeByEventtypeid(log.getEventtypeid());
if (mlt.getAccountuserid()==userSession.getAccountuser().getAccountuserid()){
    mb.append(reger.InfoBox.get(reger.InfoBox.BOXTYPEINFO, pageProps.pathToAppRoot, "Note: This log is of a custom log type that you own.  Any changes to the layout here will NOT be reflected in the layout of the custom log type."));
}



mb.append("<table cellpadding=5 cellspacing=1 border=0 width=100% align=center>");




//Main fields display
mb.append("<tr>");
mb.append("<td bgcolor=#ffffff align=left colspan=2>");
//Display the fields
mb.append(FieldLayout.getHtml(0, pageProps.logProps.logid, FieldLayout.LAYOUTMODEEDIT, userSession, "logs-log-fieldlayout.log", "logs-field.log", "logs-newfield.log", pageProps));
mb.append("</td>");
mb.append("</tr>");


mb.append("<!-- End column table -->");
mb.append("</table>");
mb.append("<br><br>");



//Log Footer start
%>
<%@ include file="logs-footer.jsp" %>
<%
//Log Footer end

%>

<%
/*----------------------------------------------------*/
/*                  Side Column                       */
        StringBuffer sc = new StringBuffer();
/*----------------------------------------------------*/
//sc.append("This is a ");
//sc.append("side column section.");

%>


<%@ include file="../globalfooter.jsp" %>
