
<%@ page import="java.util.*,
                 javax.naming.Context,
                 javax.naming.InitialContext,
                 reger.Help,
                 reger.core.db.Db" %>

<%
/*----------------------------------------------------*/
/*                  Page Config                       */
reger.pageFramework.PageProps pageProps = new reger.pageFramework.PageProps();
pageProps.siteSection=pageProps.MASTERADMINSITE;
pageProps.title = "";
pageProps.isPasswordProtected = true;
pageProps.navButtonName = "loeoffensive";
pageProps.aclObjectName = "MASTERADMIN";
pageProps.pathToAppRoot="../";
/*----------------------------------------------------*/
%>

<%@ include file="../globalheader.jsp" %>

<%
/*----------------------------------------------------*/
/*                  Main Body                         */
    StringBuffer mb = new StringBuffer();
/*----------------------------------------------------*/




//Do work of adding
if (pageProps.action.equals("addword")){
    String word = "";
    if (request.getParameter("word")!=null && !request.getParameter("word").equals("")){
        word = request.getParameter("word");
    }
    //Validate incoming data
    if (!word.equals("")){
        //-----------------------------------
        //-----------------------------------
        int identity = Db.RunSQLInsert("INSERT INTO offensivecontentdefaults(content) VALUES('"+reger.core.Util.cleanForSQL(word)+"')");
        //-----------------------------------
        //-----------------------------------
    }
}

//Do work of deleting
if (pageProps.action.equals("deleteword")){
    int offensivecontentdefaultsid = -1;
    if (request.getParameter("offensivecontentdefaultsid")!=null && reger.core.Util.isinteger(request.getParameter("offensivecontentdefaultsid"))){
        offensivecontentdefaultsid = Integer.parseInt(request.getParameter("offensivecontentdefaultsid"));
    }
    //Validate incoming data
    if (offensivecontentdefaultsid>0){
        //-----------------------------------
        //-----------------------------------
        int identity = Db.RunSQLInsert("DELETE FROM offensivecontentdefaults WHERE offensivecontentdefaultsid='"+offensivecontentdefaultsid+"'");
        //-----------------------------------
        //-----------------------------------
    }
}



mb.append("<!-- Start List -->");
mb.append(reger.ui.BubbleBox.start("Add a New Offensive Word or Phrase", pageProps.pathToAppRoot));
mb.append("<form action=offensivewordslist.log method=post>");
mb.append("<input type=hidden name=action value='addword'>");
mb.append("<table cellpadding=3 cellspacing=0 border=0>");
mb.append("<tr>");
mb.append("<td valign=top>");
mb.append("<input type=text name=word value=''>");
mb.append("</td>");
mb.append("<td valign=top>");
mb.append("<input type=submit value='Add Word'>");
mb.append("</td>");
mb.append("</tr>");
mb.append("</table>");
mb.append("</form>");
mb.append(reger.ui.BubbleBox.end(pageProps.pathToAppRoot));
mb.append("<!-- End List -->");





mb.append("<!-- Start List -->");
mb.append(reger.ui.BubbleBox.start("System Default Offensive Words", pageProps.pathToAppRoot));
mb.append("<table width=100% cellpadding=0 cellspacing=1 border=0>");
mb.append("<tr>");
mb.append("<td bgcolor=#e6e6e6 valign=top align=left>");
mb.append("<font face=arial size=-2 color=#666666>");
mb.append("Word");
mb.append("</font>");
mb.append("</td>");
mb.append("<td bgcolor=#e6e6e6 valign=top align=left>");
mb.append("<font face=arial size=-2 color=#666666>");
mb.append("Action");
mb.append("</font>");
mb.append("</td>");
mb.append("</tr>");
//-----------------------------------
//-----------------------------------
String[][] rstApprovalsDef= Db.RunSQL("SELECT offensivecontentdefaultsid, content FROM offensivecontentdefaults ORDER BY content ASC");
//-----------------------------------
//-----------------------------------
if (rstApprovalsDef!=null && rstApprovalsDef.length>0){
    for(int i=0; i<rstApprovalsDef.length; i++){
        mb.append("<tr>");
        mb.append("<td bgcolor=#ffffff valign=top align=left>");
        mb.append("<font face=arial size=-2>");
        mb.append(rstApprovalsDef[i][1]);
        mb.append("</font>");
        mb.append("</td>");
        mb.append("<td bgcolor=#ffffff valign=top align=left>");
        mb.append("<font face=arial size=-2>");
        mb.append("<a href='offensivewordslist.log?action=deleteword&offensivecontentdefaultsid="+rstApprovalsDef[i][0]+"'>");
        mb.append("Delete");
        mb.append("</a>");
        mb.append("</font>");
        mb.append("</td>");
        mb.append("</tr>");
    }
} else {
    mb.append("<tr><td bgcolor=#ffffff valign=top colspan=2>");
    mb.append("<font face=arial size=-2>There are not yet any offensive words defined for the system.</font>");
    mb.append("</td></tr>");
}
mb.append("</table>");
mb.append(reger.ui.BubbleBox.end(pageProps.pathToAppRoot));
mb.append("<!-- End List -->");


%>


<%
/*----------------------------------------------------*/
/*                  Side Column                       */
    StringBuffer sc = new StringBuffer();
/*----------------------------------------------------*/

    //sc.append("This is a ");
    //sc.append("side column section.");
%>


<%@ include file="../globalfooter.jsp" %>







