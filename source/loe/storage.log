
<%@ page import="java.util.*,
                 reger.core.db.Db" %>

<%
/*----------------------------------------------------*/
/*                  Page Config                       */
reger.pageFramework.PageProps pageProps = new reger.pageFramework.PageProps();
pageProps.siteSection=pageProps.MASTERADMINSITE;
pageProps.title = "Storage Report";
pageProps.isPasswordProtected = true;
pageProps.navButtonName = "loestorage";
pageProps.aclObjectName = "MASTERADMIN";
pageProps.pathToAppRoot="../";
/*----------------------------------------------------*/
%>

<%@ include file="../globalheader.jsp" %>

<%
/*----------------------------------------------------*/
/*                  Main Body                         */
    StringBuffer mb = new StringBuffer();
/*----------------------------------------------------*/


mb.append("<table cellpadding=0 cellspacing=2 width=100% border=0>");


//Total space in text
mb.append("<tr>");
mb.append("<td valign=top bgcolor=#000000 colspan=2>");
mb.append("<font face=arial size=-1 color=#ffffff>");
mb.append("Entries");
mb.append("</font>");
mb.append("</td>");
mb.append("</tr>");
mb.append("<tr>");
mb.append("<td valign=top bgcolor=#cccccc>");
mb.append("<font face=arial size=-1>");
mb.append("How Many");
mb.append("</font>");
mb.append("</td>");
mb.append("<td valign=top bgcolor=#cccccc>");
mb.append("<font face=arial size=-1>");
mb.append("Bytes Used");
mb.append("</font>");
mb.append("</td>");
mb.append("</tr>");
//-----------------------------------
//-----------------------------------
String[][] rstTxt= Db.RunSQL("SELECT SUM(sizeinbytes) as spc, count(*)  FROM event");
//-----------------------------------
//-----------------------------------
if (rstTxt!=null && rstTxt.length>0){
	for(int i=0; i<rstTxt.length; i++){
        mb.append("<tr>");
        mb.append("<td valign=top bgcolor=#e6e6e6>");
        mb.append("<font face=arial size=-1>");
        mb.append(rstTxt[i][1]);
        mb.append("</font>");
        mb.append("</td>");
        mb.append("<td valign=top bgcolor=#e6e6e6>");
        mb.append("<font face=arial size=-1>");
        mb.append(rstTxt[i][0]);
        mb.append("</font>");
        mb.append("</td>");
        mb.append("</tr>");
	}
}


//Total space in images
long totalspaceinimages = 0;
int totalimages = 0;
mb.append("<tr>");
mb.append("<td valign=top bgcolor=#000000 colspan=3>");
mb.append("<font face=arial size=-1 color=#ffffff>");
mb.append("Image/Media");
mb.append("</font>");
mb.append("</td>");
mb.append("</tr>");
mb.append("<tr>");
mb.append("<td valign=top bgcolor=#cccccc>");
mb.append("<font face=arial size=-1>");
mb.append("How Many");
mb.append("</font>");
mb.append("</td>");
mb.append("<td valign=top bgcolor=#cccccc>");
mb.append("<font face=arial size=-1>");
mb.append("Bytes Used");
mb.append("</font>");
mb.append("</td>");
mb.append("</tr>");
//-----------------------------------
//-----------------------------------
String[][] rstImg= Db.RunSQL("SELECT SUM(image.sizeinbytes) as spc, count(*)  FROM image");
//-----------------------------------
//-----------------------------------
if (rstImg!=null && rstImg.length>0){
	for(int i=0; i<rstImg.length; i++){
        mb.append("<tr>");
        mb.append("<td valign=top bgcolor=#e6e6e6>");
        mb.append("<font face=arial size=-1>");
        mb.append(rstImg[i][1]);
        mb.append("</font>");
        mb.append("</td>");
        mb.append("<td valign=top bgcolor=#e6e6e6>");
        mb.append("<font face=arial size=-1>");
        mb.append(rstImg[i][0]);
        mb.append("</font>");
        mb.append("</td>");
        mb.append("</tr>");
	}
}


//Total space in messages
mb.append("<tr>");
mb.append("<td valign=top bgcolor=#000000 colspan=3>");
mb.append("<font face=arial size=-1 color=#ffffff>");
mb.append("Comments");
mb.append("</font>");
mb.append("</td>");
mb.append("</tr>");
mb.append("<tr>");
mb.append("<td valign=top bgcolor=#cccccc>");
mb.append("<font face=arial size=-1>");
mb.append("How Many");
mb.append("</font>");
mb.append("</td>");
mb.append("<td valign=top bgcolor=#cccccc>");
mb.append("<font face=arial size=-1>");
mb.append("Bytes Used");
mb.append("</font>");
mb.append("</td>");
mb.append("</tr>");
//-----------------------------------
//-----------------------------------
String[][] rstMsg= Db.RunSQL("SELECT SUM(message.sizeinbytes) as spc, count(*)  FROM message");
//-----------------------------------
//-----------------------------------
if (rstMsg!=null && rstMsg.length>0){
	for(int i=0; i<rstMsg.length; i++){
        mb.append("<tr>");
        mb.append("<td valign=top bgcolor=#e6e6e6>");
        mb.append("<font face=arial size=-1>");
        mb.append(rstMsg[i][1]);
        mb.append("</font>");
        mb.append("</td>");
        mb.append("<td valign=top bgcolor=#e6e6e6>");
        mb.append("<font face=arial size=-1>");
        mb.append(rstMsg[i][0]);
        mb.append("</font>");
        mb.append("</td>");
        mb.append("</tr>");
	}
}


mb.append("</table>");



%>


<%
/*----------------------------------------------------*/
/*                  Side Column                       */
    StringBuffer sc = new StringBuffer();
/*----------------------------------------------------*/

    //sc.append("This is a ");
    //sc.append("side column section.");
%>


<%@ include file="../globalfooter.jsp" %>







