<%@ page import="reger.SideColumn,
                 reger.core.db.Db,
                 java.util.Vector,
                 reger.mega.Field,
                 reger.mega.FieldType,
                 reger.search.SearchUI,
                 reger.search.SearchUIFlowAdvSearch"%>
<%
/*----------------------------------------------------*/
/*                  Page Config                       */
reger.pageFramework.PageProps pageProps = new reger.pageFramework.PageProps();
pageProps.siteSection=pageProps.PUBLICSITE;
pageProps.isPasswordProtected = false;
pageProps.trafficType=reger.Vars.TRAFFICTYPEPUBLICLOGSECTION;
pageProps.pathToAppRoot="";
/*----------------------------------------------------*/
%>

<%@ include file="globalheader.jsp" %>

<%


/*----------------------------------------------------*/
/*                  Main Body                         */
        StringBuffer mb = new StringBuffer();
/*----------------------------------------------------*/

if (userSession.getAccount().isPro() && userSession.getAccount().getIssearchmysiteon()==1) {

    mb.append("<font face=arial size=+1 class=largefont>");
    mb.append("Saved Searches:");
    mb.append("</font>");
    mb.append("<br><br>");
    mb.append("<font face=arial size=-1 class=mediumfont>");
    //-----------------------------------
    //-----------------------------------
    String[][] rstSavedSearch= Db.RunSQL("SELECT savedsearch.savedsearchid, savedsearch.name FROM savedsearch, megalog, savedsearchlog WHERE savedsearch.savedsearchid=savedsearchlog.savedsearchid AND savedsearchlog.logid=megalog.logid AND "+userSession.getAccountuser().LogsUserCanViewQueryend(userSession.getAccount().getAccountid())+" GROUP BY savedsearchid ORDER BY savedsearch.name ASC");
    //-----------------------------------
    //-----------------------------------
    if (rstSavedSearch!=null && rstSavedSearch.length>0){
        for(int i=0; i<rstSavedSearch.length; i++){
            mb.append("<a href='search.log?savedsearchid="+rstSavedSearch[i][0]+"'>");
            mb.append(rstSavedSearch[i][1]);
            mb.append("</a>");
            mb.append("<br>");
        }
    } else {
        mb.append("No saved searches are available.");
    }
}


mb.append("<br><br>");

%>

<%
/*----------------------------------------------------*/
/*                  Side Column                       */
        StringBuffer sc = new StringBuffer();
/*----------------------------------------------------*/



%>

<%@ include file="globalfooter.jsp" %>

