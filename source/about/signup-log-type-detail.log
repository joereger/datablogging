
<%
/*----------------------------------------------------*/
/*                  Page Config                       */
reger.pageFramework.PageProps pageProps = new reger.pageFramework.PageProps();
pageProps.siteSection=pageProps.MARKETINGSITE;
pageProps.isPasswordProtected = false;
pageProps.trafficType=reger.Vars.TRAFFICTYPEMARKETINGSITEMISC;
pageProps.pathToAppRoot="../";
pageProps.marketingSiteSection = pageProps.MARKETINGSITESECTIONSIGNUP;
/*----------------------------------------------------*/
%>

<%@ include file="../globalheader.jsp" %>



<%
//Redirect to reger.com/about/signup.log if this pl doesn't have signup enabled
if (!userSession.getPl().getIssignupenabled()){
    try {
        response.sendRedirect("http://www.reger.com/about/signup.log");
        return;
    } catch (Exception e){
        Debug.errorsave(e, "");
    }
}

%>




<%
/*----------------------------------------------------*/
/*                  Main Body                         */
        StringBuffer mb = new StringBuffer();
/*----------------------------------------------------*/
//reger.UserSession userSession;

reger.MegaLogType logType = null;
if (request.getParameter("eventtypeid")!=null && reger.core.Util.isinteger(request.getParameter("eventtypeid"))){
    logType = reger.AllMegaLogTypesInSystem.getMegaLogTypeByEventtypeid(Integer.parseInt(request.getParameter("eventtypeid")));
} else {
    response.sendRedirect("signup.log");
    return;
}

int logtypedetailtoshow = reger.MegaLogTypeHtmlrender.LOGTYPEDETAILTOSHOWENTRYPAGE;
if (request.getParameter("logtypedetailtoshow")!=null && reger.core.Util.isinteger(request.getParameter("logtypedetailtoshow"))){
    logtypedetailtoshow = Integer.parseInt(request.getParameter("logtypedetailtoshow"));
}

//Pl is locked down but user is not logged-in
if((userSession.getPl().getForcelogintoviewsites() && (userSession.getAccountuser()==null || !userSession.getAccountuser().isLoggedIn))){
    response.sendRedirect("signup2.log?eventtypeid=" + userSession.getPl().getDefaulteventtypeid());
    return;
}

//HtmlCache
String cachekeyLoggedin = "";
if (userSession.getAccountuser()!=null && userSession.getAccountuser().isLoggedIn){
    cachekeyLoggedin = " ACCOUNTUSERID=" + userSession.getAccountuser().getAccountuserid() + " ";
}
String cachekey = "SignupLogDetail" + cachekeyLoggedin + " URL:" + reger.cache.HtmlCache.getKeyFromRequest(request); //Anything unique for the page
int refreshintervalinseconds = 600;
%><%@ include file="../htmlcachestart.jsp" %><%

mb.append("<br>");
mb.append(reger.marketingSite.SignupProgressBar.getBar(1));
mb.append("<br>");


mb.append(reger.MegaLogTypeHtmlrender.getSummary(logType, logtypedetailtoshow, "signup2.log", "signup-log-type-detail.log", request, response, userSession, pageProps));



%><%@ include file="../htmlcacheend.jsp" %><%

%>

<%
/*----------------------------------------------------*/
/*                  Side Column                       */
        StringBuffer sc = new StringBuffer();
/*----------------------------------------------------*/
%>


<%@ include file="../globalfooter.jsp" %>

