
<%
/*----------------------------------------------------*/
/*                  Page Config                       */
reger.pageFramework.PageProps pageProps = new reger.pageFramework.PageProps();
pageProps.siteSection=pageProps.MARKETINGSITE;
pageProps.title = "Community: Log Types";
pageProps.navButtonName = "aboutcommunity-logtypes-detail";
pageProps.isPasswordProtected = false;
pageProps.trafficType=reger.Vars.TRAFFICTYPEMARKETINGSITEMISC;
pageProps.pathToAppRoot="../";
pageProps.marketingSiteSection = pageProps.MARKETINGSITESECTIONCOMMUNITY;
/*----------------------------------------------------*/
%>

<%@ include file="../globalheader.jsp" %>





<%
/*----------------------------------------------------*/
/*                  Main Body                         */
        StringBuffer mb = new StringBuffer();
/*----------------------------------------------------*/
//reger.UserSession userSession;

pageProps.entry = new reger.Entry(0);

reger.MegaLogType logType = null;
if (request.getParameter("eventtypeid")!=null && reger.core.Util.isinteger(request.getParameter("eventtypeid"))){
    logType = reger.AllMegaLogTypesInSystem.getMegaLogTypeByEventtypeid(Integer.parseInt(request.getParameter("eventtypeid")));
} else {
    response.sendRedirect("community-logtypes.log");
    return;
}

int logtypedetailtoshow = reger.MegaLogTypeHtmlrender.LOGTYPEDETAILTOSHOWENTRYPAGE;
if (request.getParameter("logtypedetailtoshow")!=null && reger.core.Util.isinteger(request.getParameter("logtypedetailtoshow"))){
    logtypedetailtoshow = Integer.parseInt(request.getParameter("logtypedetailtoshow"));
}

//Pl is locked down but user is not logged-in
if((userSession.getPl().getForcelogintoviewsites() && (userSession.getAccountuser()==null || !userSession.getAccountuser().isLoggedIn))){
    response.sendRedirect("signup.log?eventtypeid=" + userSession.getPl().getDefaulteventtypeid());
    return;
}

//HtmlCache
String cachekeyLoggedin = "";
if (userSession.getAccountuser()!=null && userSession.getAccountuser().isLoggedIn){
    cachekeyLoggedin = " ACCOUNTUSERID=" + userSession.getAccountuser().getAccountuserid() + " ";
}
String cachekey = "CommunityLogDetail" + cachekeyLoggedin + " URL:" + reger.cache.html.HtmlCache.getKeyFromRequest(request); //Anything unique for the page
int refreshintervalinseconds = 3600;
%><%@ include file="../htmlcachestart.jsp" %><%


        mb.append("<br>");
        mb.append(reger.MegaLogTypeHtmlrender.getSummary(logType, logtypedetailtoshow, "signup.log", "community-logtypes-detail.log", request, response, userSession, pageProps));


%><%@ include file="../htmlcacheend.jsp" %><%

%>

<%
/*----------------------------------------------------*/
/*                  Side Column                       */
        StringBuffer sc = new StringBuffer();
/*----------------------------------------------------*/
%>


<%@ include file="../globalfooter.jsp" %>

