<%@ page import="reger.core.db.Db"%>
<%
/*----------------------------------------------------*/
/*                  Page Config                       */
reger.pageFramework.PageProps pageProps = new reger.pageFramework.PageProps();
pageProps.siteSection=pageProps.PUBLICSITE;
pageProps.isPasswordProtected = false;
pageProps.isLogidRequired=false;
pageProps.isEventidRequired=false;
pageProps.trafficType=reger.Vars.TRAFFICTYPEPUBLICMISC;
pageProps.pathToAppRoot="";
/*----------------------------------------------------*/
%>

<%@ include file="globalheader.jsp" %>

<%
/*----------------------------------------------------*/
/*                  Main Body                         */
        StringBuffer mb = new StringBuffer();
/*----------------------------------------------------*/



//Get the correct accountuser
int accountuserid = -1;
if (request.getParameter("accountuserid")!=null && reger.core.Util.isinteger(request.getParameter("accountuserid"))){
    accountuserid = Integer.parseInt(request.getParameter("accountuserid"));
} else {
    //Go get the account owner's accountid
    //-----------------------------------
    //-----------------------------------
    String[][] rstAccOwn= Db.RunSQL("SELECT accountuser.accountuserid FROM accountuser, aclgroup, accountuseraclgroup WHERE accountuser.accountid='"+userSession.getAccount().getAccountid()+"' AND accountuser.accountuserid=accountuseraclgroup.accountuserid AND accountuseraclgroup.aclgroupid=aclgroup.aclgroupid AND (aclgroup.aclgroupname='SiteOwner')");
    //-----------------------------------
    //-----------------------------------
    if (rstAccOwn!=null && rstAccOwn.length>0){
    	accountuserid = Integer.parseInt(rstAccOwn[0][0]);
    }
}

//Now create an accountuser object
reger.Accountuser au = new reger.Accountuser(userSession.getAccount().getAccountid(), accountuserid);

// To let Profile class know that request is coming from author.log. Based on this Edit Profile is hidden.
reger.Profile.fromAuthorLog = true;
//Now output the profile
mb.append(reger.Profile.getHtmlProfile(au, userSession, false, pageProps.pathToAppRoot));



%>

<%
/*----------------------------------------------------*/
/*                  Side Column                       */
        StringBuffer sc = new StringBuffer();
/*----------------------------------------------------*/

//sc.append(reger.SideColumn.favorites(pageProps.logProps.logid, pageProps.logProps.megalogname));

%>

<%@ include file="globalfooter.jsp" %>

