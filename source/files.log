<%@ page import="reger.core.db.Db"%>
<%
/*----------------------------------------------------*/
/*                  Page Config                       */
reger.pageFramework.PageProps pageProps = new reger.pageFramework.PageProps();
pageProps.siteSection=pageProps.PUBLICSITE;
pageProps.isPasswordProtected = false;
pageProps.isLogidRequired=false;
pageProps.isEventidRequired=false;
pageProps.trafficType=reger.Vars.TRAFFICTYPEPUBLICMISC;
pageProps.pathToAppRoot="";
/*----------------------------------------------------*/
%>

<%@ include file="globalheader.jsp" %>

<%
/*----------------------------------------------------*/
/*                  Main Body                         */
        StringBuffer mb = new StringBuffer();
/*----------------------------------------------------*/

//Tags
//mb.append("<table cellpadding=0 cellspacing=0 border=0>");
//mb.append("<tr>");
//mb.append("<td bgcolor=#e6e6e6>");
//mb.append("<font face=arial size=-1 class=mediumfont>");
//mb.append("Keyword Tags");
//mb.append("</font>");
//mb.append("</td>");
//mb.append("</tr>");
//mb.append("<tr>");
//mb.append("<td>");
//mb.append(reger.ImageTag.getTagsAndLinksHtml(userSession.getAccount().getAccountid(), userSession, false));
//mb.append("</td>");
//mb.append("</tr>");
//mb.append("</table>");
//
//mb.append("<br><br>");

//Currentpage
int currentpage=1;
if (request.getParameter("currentpage")!=null && reger.core.Util.isinteger(request.getParameter("currentpage"))){
    currentpage=Integer.parseInt(request.getParameter("currentpage"));
}
//Imagetagid
int imagetagid=-1;
if (request.getParameter("imagetagid")!=null && reger.core.Util.isinteger(request.getParameter("imagetagid"))){
    imagetagid=Integer.parseInt(request.getParameter("imagetagid"));
}

//Show the imagetag name
if (imagetagid>0) {
    String tag = "";
    //-----------------------------------
    //-----------------------------------
    String[][] rstTagname= Db.RunSQL("SELECT tag FROM imagetag WHERE imagetagid='"+imagetagid+"'");
    //-----------------------------------
    //-----------------------------------
    if (rstTagname!=null && rstTagname.length>0){
        tag = rstTagname[0][0];
    }
    if (!tag.equals("")){
        mb.append("<font face=arial size=+1 class=largefont>");
        mb.append(tag);
        mb.append("</font>");
        mb.append("<br><br>");
    }
}

//Perpage
int perpage=50;
//Output the images in html format
mb.append(reger.core.Util.popup());
boolean displayasadmin = false;
mb.append(reger.ImageListHtml.tableStart());
mb.append(reger.ImageListHtml.htmlOut(userSession.getAccount().getAccountid(), pageProps.entry.eventid, imagetagid, displayasadmin, userSession, currentpage, perpage, request));
mb.append(reger.ImageListHtml.tableEnd());


%>

<%
/*----------------------------------------------------*/
/*                  Side Column                       */
        StringBuffer sc = new StringBuffer();
/*----------------------------------------------------*/

//Instantiate the entry object
pageProps.entry.populate(userSession.getAccountuser(), userSession.getAccount(), userSession.getPl(), pageProps.logProps.logid, request);


sc.append(reger.SideColumn.sideColTableStart("Keyword Tags"));
sc.append(reger.SideColumn.sideColHeaderRow("Keyword Tags"));

StringBuffer qs = new StringBuffer();

qs.append("<table cellpadding=0 width=100% cellspacing=0 border=0>");
qs.append("<tr>");
qs.append("<td bgcolor=#e6e6e6>");
qs.append("<font face=arial size=-1 class=mediumfont>");
qs.append("<a href='files.log'>");
qs.append("All Images");
qs.append("</a>");
qs.append("</font>");
qs.append("</td>");
qs.append("</tr>");
qs.append("<tr>");
qs.append("<td>");
qs.append(reger.ImageTag.getTagsAndLinksHtml(userSession.getAccount().getAccountid(), userSession, true));
qs.append("</td>");
qs.append("</tr>");
qs.append("</table>");

sc.append(reger.SideColumn.sideColContentRow(qs.toString()));

sc.append(reger.SideColumn.sideColTableEnd("Keyword Tags"));

%>

<%@ include file="globalfooter.jsp" %>

